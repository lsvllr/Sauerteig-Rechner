<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåæ Multi-Mehl Sauerteigbrot Rechner</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            padding: 30px;
            background: #f8fafc;
        }
        
        .control-group {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-left: 4px solid #667eea;
        }
        
        .control-group h3 {
            margin: 0 0 20px 0;
            color: #2d3748;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
            font-size: 0.9rem;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e2e8f0;
            outline: none;
            appearance: none;
            cursor: pointer;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            font-size: 0.95rem;
            cursor: pointer;
        }
        
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .mehl-info {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #48bb78;
        }
        
        .mehl-info h4 {
            margin: 0 0 5px 0;
            color: #2d3748;
            font-size: 1rem;
        }
        
        .mehl-info p {
            margin: 0 0 10px 0;
            font-size: 0.85rem;
            color: #4a5568;
        }
        
        .mehl-anteile {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            font-size: 0.8rem;
            margin-top: 10px;
        }
        
        .zeitplan {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
        }
        
        .zeitplan-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #cbd5e0;
            font-size: 0.9rem;
        }
        
        .zeitplan-item:last-child {
            border-bottom: none;
        }
        
        .zeitplan-item .zeit {
            font-weight: 600;
            color: #2b6cb0;
        }
        
        .recipe {
            padding: 30px;
        }
        
        .recipe-section {
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .section-sauerteig {
            background: #ebf8ff;
            border-left: 4px solid #3182ce;
        }
        
        .section-hauptteig {
            background: #fffaf0;
            border-left: 4px solid #d69e2e;
        }
        
        .section-backen {
            background: #fed7d7;
            border-left: 4px solid #e53e3e;
        }
        
        .recipe-section h2 {
            margin: 0 0 20px 0;
            font-size: 1.4rem;
            color: #2d3748;
        }
        
        .recipe-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }
        
        .zutat-liste {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .zutat-liste li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .zutat-liste li:before {
            content: '‚Ä¢';
            color: #667eea;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .tipps {
            background: #f0fff4;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #48bb78;
            margin-top: 20px;
        }
        
        .tipps h3 {
            margin: 0 0 15px 0;
            color: #2d3748;
        }
        
        .tipps ul {
            margin: 0;
            padding-left: 20px;
            columns: 2;
            column-gap: 30px;
        }
        
        .tipps li {
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #4a5568;
            break-inside: avoid;
        }
        
        .ergebnis-info {
            background: linear-gradient(135deg, #fef5e7 0%, #fbd38d 100%);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .ergebnis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .custom-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .custom-slider-group {
            margin-bottom: 15px;
        }
        
        .custom-slider-group label {
            font-size: 0.8rem;
            color: #4a5568;
        }
        
        .normalize-btn {
            background: #3182ce;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .normalize-btn:hover {
            background: #2c5282;
        }
        
        .warning {
            color: #e53e3e;
            font-size: 0.8rem;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .tipps ul {
                columns: 1;
            }
            
            .recipe-content {
                grid-template-columns: 1fr;
            }
            
            .custom-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåæ Multi-Mehl Sauerteigbrot Rechner</h1>
            <p>Roggen ‚Ä¢ Dinkel ‚Ä¢ Weizen ‚Ä¢ Buchweizen - Ihr perfektes Mischverh√§ltnis</p>
        </div>

        <div class="controls">
            <!-- Grundeinstellungen -->
            <div class="control-group">
                <h3>‚öôÔ∏è Grundeinstellungen</h3>
                
                <div class="form-group">
                    <label>Anstellgut: <span id="anstellgut-wert">120</span>g</label>
                    <input type="range" id="anstellgut" class="slider" min="30" max="200" value="120">
                </div>
                
                <div class="form-group">
                    <label>Sauerteig-Temperatur: <span id="sauerteig-temp-wert">22</span>¬∞C</label>
                    <input type="range" id="sauerteig-temp" class="slider" min="18" max="32" value="22">
                </div>
                
                <div class="form-group">
                    <label>Gare-Temperatur: <span id="gare-temp-wert">30</span>¬∞C</label>
                    <input type="range" id="gare-temp" class="slider" min="20" max="32" value="30">
                </div>
                
                <div class="form-group">
                    <label>Brotgr√∂√üe: <span id="brot-groesse-wert">1200</span>g</label>
                    <input type="range" id="brot-groesse" class="slider" min="600" max="2000" step="100" value="1200">
                </div>
                
                <div class="form-group">
                    <label>Hydration: <span id="hydration-wert">65</span>% <span id="hydration-hinweis" style="font-size: 0.75rem; color: #48bb78;">‚óèempfohlen</span></label>
                    <input type="range" id="hydration-slider" class="slider" min="50" max="85" value="65">
                    <p style="font-size: 0.75rem; color: #718096; margin-top: 5px;">H√∂here Werte = weicherer Teig</p>
                </div>
            </div>

            <!-- Mehl-Mischung -->
            <div class="control-group">
                <h3>üåæ Mehl-Mischung</h3>
                
                <div class="form-group">
                    <label>Mischung w√§hlen:</label>
                    <select id="mehl-mischung">
                        <option value="roggen-pur">Reines Roggen</option>
                        <option value="roggen-optimal" selected>Roggen Optimal (empfohlen)</option>
                        <option value="roggen-dinkel">Roggen-Dinkel</option>
                        <option value="roggen-weizen">Roggen-Weizen</option>
                        <option value="vollkorn-mix">Vollkorn-Mix</option>
                        <option value="buchweizen-spezial">Buchweizen Spezial</option>
                        <option value="mild-luftig">Mild & Luftig</option>
                        <option value="power-vollkorn">Power Vollkorn</option>
                        <option value="custom">Eigene Mischung</option>
                    </select>
                </div>
                
                <div class="mehl-info" id="mehl-info">
                    <h4 id="mischung-name">Roggen Optimal</h4>
                    <p id="mischung-beschreibung">Beste Balance: Geschmack + Lockerung + Bek√∂mmlichkeit</p>
                    <p id="mischung-eigenschaften"><strong>Eigenschaften:</strong> Ausgewogen, gut aufgehend, mild-kr√§ftig</p>
                    <div class="mehl-anteile" id="mehl-anteile">
                        <div>üü´ Roggen: 70%</div>
                        <div>üü§ Dinkel: 20%</div>
                        <div>üü° Weizen: 10%</div>
                        <div>‚ö´ Buchweizen: 0%</div>
                    </div>
                </div>
                
                <div id="custom-controls" style="display: none;">
                    <div class="custom-controls">
                        <div class="custom-slider-group">
                            <label>üü´ Roggen: <span id="custom-roggen-wert">70</span>%</label>
                            <input type="range" id="custom-roggen" class="slider" min="0" max="100" value="70">
                        </div>
                        <div class="custom-slider-group">
                            <label>üü§ Dinkel: <span id="custom-dinkel-wert">20</span>%</label>
                            <input type="range" id="custom-dinkel" class="slider" min="0" max="100" value="20">
                        </div>
                        <div class="custom-slider-group">
                            <label>üü° Weizen: <span id="custom-weizen-wert">10</span>%</label>
                            <input type="range" id="custom-weizen" class="slider" min="0" max="100" value="10">
                        </div>
                        <div class="custom-slider-group">
                            <label>‚ö´ Buchweizen: <span id="custom-buchweizen-wert">0</span>%</label>
                            <input type="range" id="custom-buchweizen" class="slider" min="0" max="100" value="0">
                        </div>
                    </div>
                    <div>
                        <span id="summe-anzeige">Summe: 100%</span>
                        <button id="normalize-btn" class="normalize-btn" style="display: none;">Auf 100% korrigieren</button>
                    </div>
                </div>
            </div>

            <!-- Zeitplan -->
            <div class="control-group">
                <h3>‚è∞ Zeitplan</h3>
                <div class="zeitplan">
                    <div class="zeitplan-item">
                        <span>Sauerteig-Reifezeit:</span>
                        <span class="zeit" id="sauerteig-zeit">8-10h</span>
                    </div>
                    <div class="zeitplan-item">
                        <span>Erste Gare:</span>
                        <span class="zeit" id="erste-gare-zeit">35-50 Min</span>
                    </div>
                    <div class="zeitplan-item">
                        <span>St√ºckgare:</span>
                        <span class="zeit">1-1,5h</span>
                    </div>
                    <div class="zeitplan-item">
                        <span>Backzeit (200¬∞C):</span>
                        <span class="zeit" id="back-zeit">45-55 Min</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="recipe">
            <!-- Sauerteig -->
            <div class="recipe-section section-sauerteig">
                <h2>1. Sauerteig herstellen (am Vorabend)</h2>
                <div class="recipe-content">
                    <div>
                        <h4>Zutaten:</h4>
                        <ul class="zutat-liste">
                            <li><span id="anstellgut-menge">120</span>g Anstellgut</li>
                            <li><span id="sauerteig-mehl">240</span>g Roggen-Vollkornmehl</li>
                            <li><span id="sauerteig-wasser">240</span>ml Wasser</li>
                        </ul>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: #2b6cb0;">
                            ‚Üí Ergebnis: ca. <span id="sauerteig-gesamt">600</span>g aktiver Sauerteig<br>
                            ‚Üí Ben√∂tigt: <span id="sauerteig-benoetigt">600</span>g f√ºr das Rezept
                        </p>
                    </div>
                    <div>
                        <h4>Zeit & Temperatur:</h4>
                        <p>üå°Ô∏è <span id="temp-anzeige">22</span>¬∞C: <strong id="zeit-anzeige">8-10h</strong></p>
                        <div id="temp-hinweise"></div>
                    </div>
                </div>
            </div>

            <!-- Hauptteig -->
            <div class="recipe-section section-hauptteig">
                <h2>2. Hauptteig</h2>
                <div class="recipe-content">
                    <div>
                        <h4>Zutaten:</h4>
                        <ul class="zutat-liste" id="hauptteig-zutaten">
                            <li><span id="hauptteig-sauerteig">600</span>g aktiver Sauerteig</li>
                            <li id="roggen-zeile"><span id="hauptteig-roggen">252</span>g Roggen-Vollkornmehl</li>
                            <li id="dinkel-zeile"><span id="hauptteig-dinkel">72</span>g Dinkel-Vollkornmehl</li>
                            <li id="weizen-zeile"><span id="hauptteig-weizen">36</span>g Weizen-Vollkornmehl</li>
                            <li id="buchweizen-zeile" style="display: none;"><span id="hauptteig-buchweizen">0</span>g Buchweizenmehl</li>
                            <li><span id="hauptteig-wasser">200</span>ml warmes Wasser</li>
                            <li><span id="hauptteig-salz">14</span>g Salz</li>
                            <li><span id="hauptteig-kuemmel">1,5</span> TL K√ºmmel (optional)</li>
                        </ul>
                    </div>
                    <div>
                        <div style="margin-bottom: 15px;">
                            <span style="font-weight: 600;">Autolyse:</span>
                            <span style="color: #d69e2e; margin-left: 8px;" id="autolyse-zeit">45-60 Min</span>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <span style="font-weight: 600;">Erste Gare:</span>
                            <span style="color: #d69e2e; margin-left: 8px;" id="erste-gare-anzeige">35-50 Min</span>
                        </div>
                        <div style="font-size: 0.8rem; color: #4a5568; margin-top: 15px;">
                            <p>Gesamt Mehl: <span id="gesamt-mehl">360</span>g</p>
                            <p>Hydration: <span id="hydration">56</span>%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formen & Backen -->
            <div class="recipe-section section-backen">
                <h2>3. Formen & Backen</h2>
                <div class="recipe-content">
                    <div>
                        <h4>Formen:</h4>
                        <p id="form-anleitung">Mit feuchten H√§nden rundwirken ‚Üí In bemehlten G√§rkorb (glatte Seite nach unten)</p>
                        
                        <h4 style="margin-top: 20px;">St√ºckgare & Backvorbereitung:</h4>
                        <p>St√ºckgare bei Zimmertemperatur: <strong>1-1,5h</strong><br>
                        Parallel: Ofen auf 250¬∞C vorheizen (30-40 Min)</p>
                    </div>
                    <div>
                        <h4>Backen:</h4>
                        <ul class="zutat-liste">
                            <li>St√ºrzen und kreuzf√∂rmig einschneiden</li>
                            <li>20 Min bei 250¬∞C mit Dampf</li>
                            <li id="back-zeit-anzeige">45-55 Min bei 200¬∞C ohne Dampf</li>
                            <li>Mittlere Schiene verwenden!</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Ergebnis-Vorhersage -->
            <div class="ergebnis-info">
                <h3>üçû Erwartetes Ergebnis:</h3>
                <div class="ergebnis-grid">
                    <div>
                        <h4 style="margin: 0 0 8px 0; color: #744210;">Krume:</h4>
                        <p id="krume-beschreibung" style="margin: 0; color: #4a5568;">Ausgewogen, mittel-locker</p>
                    </div>
                    <div>
                        <h4 style="margin: 0 0 8px 0; color: #744210;">Geschmack:</h4>
                        <p id="geschmack-beschreibung" style="margin: 0; color: #4a5568;">Ausgewogen, mittel-kr√§ftig</p>
                    </div>
                    <div>
                        <h4 style="margin: 0 0 8px 0; color: #744210;">Haltbarkeit:</h4>
                        <p id="haltbarkeit-beschreibung" style="margin: 0; color: #4a5568;">3-5 Tage</p>
                    </div>
                </div>
            </div>

            <!-- Tipps -->
            <div class="tipps">
                <h3>üí° Wichtige Tipps:</h3>
                <ul id="tipps-liste">
                    <li>Fingertest: Delle federt nur zur H√§lfte zur√ºck = fertig</li>
                    <li>Bei viel Roggen: immer mit feuchten H√§nden arbeiten</li>
                    <li>Lieber etwas fr√ºher als zu sp√§t backen</li>
                    <li>Klopftest: Fertiges Brot klingt hohl</li>
                    <li>Nach dem Backen mindestens 2h ausk√ºhlen lassen</li>
                    <li>Je h√∂her der Roggen-Anteil, desto kompakter das Brot</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Mehl-Mischungen Definition
        const mehlMischungen = {
            'roggen-pur': { 
                roggen: 100, dinkel: 0, weizen: 0, buchweizen: 0, 
                name: 'Reines Roggen', 
                beschreibung: 'Traditionell, kr√§ftig, kompakt, s√§uerlich',
                eigenschaften: 'Sehr kompakt, intensiver Geschmack, lange haltbar'
            },
            'roggen-optimal': { 
                roggen: 70, dinkel: 20, weizen: 10, buchweizen: 0, 
                name: 'Roggen Optimal', 
                beschreibung: 'Beste Balance: Geschmack + Lockerung + Bek√∂mmlichkeit',
                eigenschaften: 'Ausgewogen, gut aufgehend, mild-kr√§ftig'
            },
            'roggen-dinkel': { 
                roggen: 60, dinkel: 40, weizen: 0, buchweizen: 0, 
                name: 'Roggen-Dinkel', 
                beschreibung: 'Nussig, bek√∂mmlich, lockerer als reiner Roggen',
                eigenschaften: 'Nussiges Aroma, gute Verdaulichkeit, mittel-lockere Krume'
            },
            'roggen-weizen': { 
                roggen: 70, dinkel: 0, weizen: 30, buchweizen: 0, 
                name: 'Roggen-Weizen', 
                beschreibung: 'Luftig, mild, gute Krume, familienfreundlich',
                eigenschaften: 'Sehr locker, milder Geschmack, weiche Krume'
            },
            'vollkorn-mix': { 
                roggen: 50, dinkel: 30, weizen: 15, buchweizen: 5, 
                name: 'Vollkorn-Mix', 
                beschreibung: 'Komplex, n√§hrstoffreich, herzhaft, vielseitig',
                eigenschaften: 'Komplexer Geschmack, sehr n√§hrstoffreich, mittlere Lockerheit'
            },
            'buchweizen-spezial': { 
                roggen: 60, dinkel: 20, weizen: 5, buchweizen: 15, 
                name: 'Buchweizen Spezial', 
                beschreibung: 'Glutenfrei-Anteil, nussig, dunkel, herzhaft',
                eigenschaften: 'Dunkle Farbe, erdiger Geschmack, glutenarm'
            },
            'mild-luftig': { 
                roggen: 40, dinkel: 30, weizen: 30, buchweizen: 0, 
                name: 'Mild & Luftig', 
                beschreibung: 'F√ºr Einsteiger, sehr locker, milder Geschmack',
                eigenschaften: 'Sehr locker, mild, toast-geeignet'
            },
            'power-vollkorn': { 
                roggen: 45, dinkel: 25, weizen: 20, buchweizen: 10, 
                name: 'Power Vollkorn', 
                beschreibung: 'Maximum an N√§hrstoffen und Geschmack',
                eigenschaften: 'Sehr n√§hrstoffreich, kr√§ftig, s√§ttigend'
            }
        };

        // DOM Elemente
        const elements = {
            anstellgut: document.getElementById('anstellgut'),
            anstellgutWert: document.getElementById('anstellgut-wert'),
            sauerteigTemp: document.getElementById('sauerteig-temp'),
            sauerteigTempWert: document.getElementById('sauerteig-temp-wert'),
            gareTemp: document.getElementById('gare-temp'),
            gareTempWert: document.getElementById('gare-temp-wert'),
            brotGroesse: document.getElementById('brot-groesse'),
            brotGroesseWert: document.getElementById('brot-groesse-wert'),
            hydrationSlider: document.getElementById('hydration-slider'),
            hydrationWert: document.getElementById('hydration-wert'),
            hydrationHinweis: document.getElementById('hydration-hinweis'),
            mehlMischung: document.getElementById('mehl-mischung'),
            customControls: document.getElementById('custom-controls'),
            customRoggen: document.getElementById('custom-roggen'),
            customRoggenWert: document.getElementById('custom-roggen-wert'),
            customDinkel: document.getElementById('custom-dinkel'),
            customDinkelWert: document.getElementById('custom-dinkel-wert'),
            customWeizen: document.getElementById('custom-weizen'),
            customWeizenWert: document.getElementById('custom-weizen-wert'),
            customBuchweizen: document.getElementById('custom-buchweizen'),
            customBuchweizenWert: document.getElementById('custom-buchweizen-wert'),
            summeAnzeige: document.getElementById('summe-anzeige'),
            normalizeBtn: document.getElementById('normalize-btn')
        };

        // Event Listeners f√ºr Grundeinstellungen
        elements.anstellgut.addEventListener('input', function() {
            elements.anstellgutWert.textContent = this.value;
            berechneRezept();
        });

        elements.sauerteigTemp.addEventListener('input', function() {
            elements.sauerteigTempWert.textContent = this.value;
            berechneRezept();
        });

        elements.gareTemp.addEventListener('input', function() {
            elements.gareTempWert.textContent = this.value;
            berechneRezept();
        });

        elements.brotGroesse.addEventListener('input', function() {
            elements.brotGroesseWert.textContent = this.value;
            berechneRezept();
        });

        elements.hydrationSlider.addEventListener('input', function() {
            elements.hydrationWert.textContent = this.value;
            markiereHydrationAenderung();
            berechneRezept();
        });

        // Event Listener f√ºr Mehl-Mischung
        elements.mehlMischung.addEventListener('change', function() {
            if (this.value === 'custom') {
                elements.customControls.style.display = 'block';
            } else {
                elements.customControls.style.display = 'none';
                aktualisiereGewaehlteMischung();
            }
            setzeOptimaleHydration();
            berechneRezept();
        });

        // Event Listeners f√ºr Custom Slider
        elements.customRoggen.addEventListener('input', function() {
            elements.customRoggenWert.textContent = this.value;
            aktualisiereCustomSumme();
            setzeOptimaleHydration();
            berechneRezept();
        });

        elements.customDinkel.addEventListener('input', function() {
            elements.customDinkelWert.textContent = this.value;
            aktualisiereCustomSumme();
            setzeOptimaleHydration();
            berechneRezept();
        });

        elements.customWeizen.addEventListener('input', function() {
            elements.customWeizenWert.textContent = this.value;
            aktualisiereCustomSumme();
            setzeOptimaleHydration();
            berechneRezept();
        });

        elements.customBuchweizen.addEventListener('input', function() {
            elements.customBuchweizenWert.textContent = this.value;
            aktualisiereCustomSumme();
            setzeOptimaleHydration();
            berechneRezept();
        });

        // Normalize Button
        elements.normalizeBtn.addEventListener('click', function() {
            normalisiereCustomWerte();
        });

        // Funktionen
        function berechneOptimaleHydration(anteile) {
            // Basis-Hydration f√ºr jedes Mehl (in Prozent)
            const hydrationWerte = {
                roggen: 68,      // Roggen braucht weniger Wasser
                dinkel: 75,      // Dinkel etwas mehr
                weizen: 72,      // Weizen mittel
                buchweizen: 85   // Buchweizen sehr viel
            };
            
            // Gewichtete Durchschnitts-Hydration basierend auf Mehl-Anteilen
            const optimaleHydration = Math.round(
                (anteile.roggen * hydrationWerte.roggen +
                 anteile.dinkel * hydrationWerte.dinkel +
                 anteile.weizen * hydrationWerte.weizen +
                 anteile.buchweizen * hydrationWerte.buchweizen) / 100
            );
            
            return optimaleHydration;
        }

        function setzeOptimaleHydration() {
            const anteile = getMehlAnteile();
            const optimaleHydration = berechneOptimaleHydration(anteile);
            
            elements.hydrationSlider.value = optimaleHydration;
            elements.hydrationWert.textContent = optimaleHydration;
            elements.hydrationHinweis.style.display = 'inline';
            elements.hydrationHinweis.textContent = '‚óèempfohlen';
            elements.hydrationHinweis.style.color = '#48bb78';
        }

        function markiereHydrationAenderung() {
            const anteile = getMehlAnteile();
            const optimaleHydration = berechneOptimaleHydration(anteile);
            const aktuelleHydration = parseInt(elements.hydrationSlider.value);
            
            if (Math.abs(aktuelleHydration - optimaleHydration) <= 2) {
                elements.hydrationHinweis.style.display = 'inline';
                elements.hydrationHinweis.textContent = '‚óèempfohlen';
                elements.hydrationHinweis.style.color = '#48bb78';
            } else {
                elements.hydrationHinweis.style.display = 'inline';
                elements.hydrationHinweis.textContent = '‚óèangepasst';
                elements.hydrationHinweis.style.color = '#d69e2e';
            }
        }
        
        function aktualisiereGewaehlteMischung() {
            const ausgewaehlt = elements.mehlMischung.value;
            const mischung = mehlMischungen[ausgewaehlt];
            
            if (mischung) {
                document.getElementById('mischung-name').textContent = mischung.name;
                document.getElementById('mischung-beschreibung').textContent = mischung.beschreibung;
                document.getElementById('mischung-eigenschaften').innerHTML = '<strong>Eigenschaften:</strong> ' + mischung.eigenschaften;
                
                const anteileDiv = document.getElementById('mehl-anteile');
                anteileDiv.innerHTML = `
                    <div>üü´ Roggen: ${mischung.roggen}%</div>
                    <div>üü§ Dinkel: ${mischung.dinkel}%</div>
                    <div>üü° Weizen: ${mischung.weizen}%</div>
                    <div>‚ö´ Buchweizen: ${mischung.buchweizen}%</div>
                `;
            }
        }

        function aktualisiereCustomSumme() {
            const summe = parseInt(elements.customRoggen.value) + 
                         parseInt(elements.customDinkel.value) + 
                         parseInt(elements.customWeizen.value) + 
                         parseInt(elements.customBuchweizen.value);
            
            elements.summeAnzeige.textContent = `Summe: ${summe}%`;
            
            if (summe !== 100) {
                elements.summeAnzeige.style.color = '#e53e3e';
                elements.normalizeBtn.style.display = 'inline-block';
            } else {
                elements.summeAnzeige.style.color = '#48bb78';
                elements.normalizeBtn.style.display = 'none';
            }
        }

        function normalisiereCustomWerte() {
            const aktuelleWerte = {
                roggen: parseInt(elements.customRoggen.value),
                dinkel: parseInt(elements.customDinkel.value),
                weizen: parseInt(elements.customWeizen.value),
                buchweizen: parseInt(elements.customBuchweizen.value)
            };
            
            const summe = aktuelleWerte.roggen + aktuelleWerte.dinkel + aktuelleWerte.weizen + aktuelleWerte.buchweizen;
            
            if (summe > 0) {
                const normalisiert = {
                    roggen: Math.round((aktuelleWerte.roggen / summe) * 100),
                    dinkel: Math.round((aktuelleWerte.dinkel / summe) * 100),
                    weizen: Math.round((aktuelleWerte.weizen / summe) * 100),
                    buchweizen: Math.round((aktuelleWerte.buchweizen / summe) * 100)
                };
                
                // Rundungsfehler korrigieren
                const neueSumme = normalisiert.roggen + normalisiert.dinkel + normalisiert.weizen + normalisiert.buchweizen;
                if (neueSumme !== 100) {
                    normalisiert.roggen += (100 - neueSumme);
                }
                
                elements.customRoggen.value = normalisiert.roggen;
                elements.customRoggenWert.textContent = normalisiert.roggen;
                elements.customDinkel.value = normalisiert.dinkel;
                elements.customDinkelWert.textContent = normalisiert.dinkel;
                elements.customWeizen.value = normalisiert.weizen;
                elements.customWeizenWert.textContent = normalisiert.weizen;
                elements.customBuchweizen.value = normalisiert.buchweizen;
                elements.customBuchweizenWert.textContent = normalisiert.buchweizen;
                
                aktualisiereCustomSumme();
                berechneRezept();
            }
        }

        function berechneZeitplan(temp) {
            let sauerteigZeit, gareZeit;
            
            if (temp <= 20) {
                sauerteigZeit = "10-12h";
                gareZeit = "45-60 Min";
            } else if (temp <= 24) {
                sauerteigZeit = "8-10h";
                gareZeit = "35-50 Min";
            } else if (temp <= 28) {
                sauerteigZeit = "6-8h";
                gareZeit = "25-35 Min";
            } else {
                sauerteigZeit = "4-6h";
                gareZeit = "20-30 Min";
            }
            
            return { sauerteigZeit, gareZeit };
        }

        function getMehlAnteile() {
            if (elements.mehlMischung.value === 'custom') {
                return {
                    roggen: parseInt(elements.customRoggen.value),
                    dinkel: parseInt(elements.customDinkel.value),
                    weizen: parseInt(elements.customWeizen.value),
                    buchweizen: parseInt(elements.customBuchweizen.value)
                };
            } else {
                return mehlMischungen[elements.mehlMischung.value];
            }
        }

        function berechneBrotEigenschaften(anteile) {
            const roggenAnteil = anteile.roggen;
            const buchweizenAnteil = anteile.buchweizen;
            const weizenAnteil = anteile.weizen;
            
            let krume, geschmack, haltbarkeit;
            
            if (roggenAnteil >= 80) {
                krume = "Sehr kompakt, dichte Krume";
                geschmack = "Kr√§ftig-s√§uerlich, traditionell";
                haltbarkeit = "5-7 Tage";
            } else if (roggenAnteil >= 60) {
                krume = "Kompakt, mitteldichte Krume";
                geschmack = "Mittel-kr√§ftig, ausgewogen";
                haltbarkeit = "4-5 Tage";
            } else if (roggenAnteil >= 40) {
                krume = "Ausgewogen, mittel-locker";
                geschmack = "Mild-kr√§ftig, harmonisch";
                haltbarkeit = "3-4 Tage";
            } else {
                krume = "Locker, luftige Krume";
                geschmack = "Mild, leicht s√§uerlich";
                haltbarkeit = "2-3 Tage";
            }
            
            if (buchweizenAnteil > 10) {
                krume += ", erdige Note";
                geschmack += ", nussig-erdig";
            }
            
            if (weizenAnteil > 25) {
                krume = krume.replace("kompakt", "lockerer");
                geschmack = geschmack.replace("kr√§ftig", "milder");
            }
            
            return { krume, geschmack, haltbarkeit };
        }

        function berechneRezept() {
            const anstellgut = parseInt(elements.anstellgut.value);
            const temp = parseInt(elements.sauerteigTemp.value);
            const gareTemp = parseInt(elements.gareTemp.value);
            const brotGroesse = parseInt(elements.brotGroesse.value);
            const zielHydration = parseInt(elements.hydrationSlider.value);
            const anteile = getMehlAnteile();
            
            // WICHTIG: Anstellgut ist der fixe Ausgangspunkt!
            // Daraus produzieren wir Sauerteig: Anstellgut + (2√ó Mehl) + (2√ó Wasser)
            const sauerteigMehl = anstellgut * 2;
            const sauerteigWasser = anstellgut * 2;
            const sauerteigGesamt = anstellgut + sauerteigMehl + sauerteigWasser;
            
            // Der GESAMTE Sauerteig wird verwendet!
            const sauerteigBenoetigt = sauerteigGesamt;
            
            // Skalierungsfaktor: wie viel des Standard-Rezepts brauchen wir?
            // Standard: 600g Sauerteig f√ºr 1200g Brot
            const standardSauerteig = 600;
            const standardBrotGroesse = 1200;
            
            // Basis-Skalierung durch gew√ºnschte Brotgr√∂√üe
            const gewuenschteSkalierung = brotGroesse / standardBrotGroesse;
            
            // Tats√§chliche Skalierung basiert auf dem produzierten Sauerteig
            const skalierung = (sauerteigGesamt / standardSauerteig) * gewuenschteSkalierung;
            
            // Hauptteig Mehl-Berechnung
            const gesamtMehl = Math.round(360 * skalierung);
            const roggenMehl = Math.round((gesamtMehl * anteile.roggen) / 100);
            const dinkelMehl = Math.round((gesamtMehl * anteile.dinkel) / 100);
            const weizenMehl = Math.round((gesamtMehl * anteile.weizen) / 100);
            const buchweizenMehl = Math.round((gesamtMehl * anteile.buchweizen) / 100);
            
            // NEUE BERECHNUNG: Wassermenge basierend auf Ziel-Hydration
            // Gesamt-Mehl = Sauerteig-Mehl + Hauptteig-Mehl
            const gesamtMehlGesamt = sauerteigMehl + gesamtMehl;
            
            // Ben√∂tigtes Gesamt-Wasser f√ºr Ziel-Hydration
            const gesamtWasserZiel = Math.round((gesamtMehlGesamt * zielHydration) / 100);
            
            // Wasser im Sauerteig ist bereits fix
            // Hauptteig-Wasser = Gesamt-Wasser - Sauerteig-Wasser
            const hauptteigWasser = gesamtWasserZiel - sauerteigWasser;
            
            const salz = Math.round(14 * skalierung);
            const kuemmel = (1.5 * skalierung).toFixed(1);
            
            // Tats√§chliche Brotgr√∂√üe berechnen (kann von gew√ºnschter abweichen)
            const tatsaechlicheBrotgroesse = Math.round(sauerteigGesamt + gesamtMehl + hauptteigWasser + salz);
            
            // Tats√§chliche Hydration berechnen (zur Kontrolle)
            const gesamtWasser = sauerteigWasser + hauptteigWasser;
            const hydration = Math.round((gesamtWasser / gesamtMehlGesamt) * 100);
            
            // Zeitplan
            const zeitplan = berechneZeitplan(temp);
            // Erste Gare immer bei Zimmertemperatur (22¬∞C), St√ºckgare bei eingestellter Gare-Temp
            const ersteGareZeitplan = berechneZeitplan(22);
            const stueckgareZeitplan = berechneZeitplan(gareTemp);
            
            // Backzeit basierend auf tats√§chlicher Brotgr√∂√üe
            let backZeit;
            if (tatsaechlicheBrotgroesse <= 800) {
                backZeit = "35-45 Min";
            } else if (tatsaechlicheBrotgroesse <= 1500) {
                backZeit = "45-55 Min";
            } else {
                backZeit = "55-65 Min";
            }
            
            // DOM Updates
            document.getElementById('anstellgut-menge').textContent = anstellgut;
            document.getElementById('sauerteig-mehl').textContent = sauerteigMehl;
            document.getElementById('sauerteig-wasser').textContent = sauerteigWasser;
            document.getElementById('sauerteig-gesamt').textContent = sauerteigGesamt;
            document.getElementById('sauerteig-benoetigt').textContent = sauerteigBenoetigt;
            
            document.getElementById('hauptteig-sauerteig').textContent = sauerteigBenoetigt;
            document.getElementById('hauptteig-roggen').textContent = roggenMehl;
            document.getElementById('hauptteig-dinkel').textContent = dinkelMehl;
            document.getElementById('hauptteig-weizen').textContent = weizenMehl;
            document.getElementById('hauptteig-buchweizen').textContent = buchweizenMehl;
            document.getElementById('hauptteig-wasser').textContent = hauptteigWasser;
            document.getElementById('hauptteig-salz').textContent = salz;
            document.getElementById('hauptteig-kuemmel').textContent = kuemmel;
            
            document.getElementById('gesamt-mehl').textContent = gesamtMehl;
            document.getElementById('hydration').textContent = hydration;
            
            // Brotgr√∂√üe-Anzeige aktualisieren um tats√§chliche Gr√∂√üe zu zeigen
            elements.brotGroesseWert.textContent = tatsaechlicheBrotgroesse;
            
            document.getElementById('temp-anzeige').textContent = temp;
            document.getElementById('zeit-anzeige').textContent = zeitplan.sauerteigZeit;
            document.getElementById('sauerteig-zeit').textContent = zeitplan.sauerteigZeit;
            document.getElementById('erste-gare-zeit').textContent = ersteGareZeitplan.gareZeit;
            document.getElementById('erste-gare-anzeige').textContent = ersteGareZeitplan.gareZeit;
            document.getElementById('back-zeit').textContent = backZeit;
            document.getElementById('back-zeit-anzeige').textContent = backZeit + " bei 200¬∞C ohne Dampf";
            
            // Mehl-Zeilen ein-/ausblenden
            document.getElementById('roggen-zeile').style.display = roggenMehl > 0 ? 'flex' : 'none';
            document.getElementById('dinkel-zeile').style.display = dinkelMehl > 0 ? 'flex' : 'none';
            document.getElementById('weizen-zeile').style.display = weizenMehl > 0 ? 'flex' : 'none';
            document.getElementById('buchweizen-zeile').style.display = buchweizenMehl > 0 ? 'flex' : 'none';
            
            // Eigenschaften berechnen
            const eigenschaften = berechneBrotEigenschaften(anteile);
            document.getElementById('krume-beschreibung').textContent = eigenschaften.krume;
            document.getElementById('geschmack-beschreibung').textContent = eigenschaften.geschmack;
            document.getElementById('haltbarkeit-beschreibung').textContent = eigenschaften.haltbarkeit;
            
            // Temperatur-Hinweise
            let tempHinweise = "";
            if (temp < 20) {
                tempHinweise = "‚ùÑÔ∏è K√ºhl - l√§ngere Reifezeit, intensiverer Geschmack";
            } else if (temp > 28) {
                tempHinweise = "üî• Warm - k√ºrzere Reifezeit, Vorsicht vor √úberreife!";
            } else {
                tempHinweise = "üå°Ô∏è Optimal - ausgewogene Reifung";
            }
            document.getElementById('temp-hinweise').innerHTML = `<p style="font-size: 0.8rem; color: #4a5568; margin-top: 10px;">${tempHinweise}</p>`;
            
            // Autolyse-Zeit basierend auf Mehlmischung
            let autolyseZeit;
            if (anteile.roggen >= 80) {
                autolyseZeit = "30-45 Min";
            } else if (anteile.weizen >= 30) {
                autolyseZeit = "60-90 Min";
            } else {
                autolyseZeit = "45-60 Min";
            }
            document.getElementById('autolyse-zeit').textContent = autolyseZeit;
        }

        // Initialisierung
        aktualisiereGewaehlteMischung();
        setzeOptimaleHydration();
        berechneRezept();
    </script>
</body>
</html>
